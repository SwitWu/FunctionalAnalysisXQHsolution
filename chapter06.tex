\setcounter{chapter}{5}
\chapter{Baire定理及其应用}
\thispagestyle{empty}
% $A$在$E$中稠密$\Leftrightarrow A^C$在$E$中无内点(由此得到Baire空间的等价定义:可数多个无内点的闭子集的并集仍无内点)\\
% \textit{Proof}:\[\begin{split}A\mbox{在}E\mbox{中稠密}&\Leftrightarrow\forall x\in E,\forall U\in\mathcal{N}(x),U\cap A\neq\emptyset\\&\Leftrightarrow\forall x\in E,\mbox{不存在}U\in\mathcal{N}(x),\mbox{使得}U\cap A=\emptyset,i.e.U\subset A^C\\&\Leftrightarrow A^C\mbox{在}E\mbox{中无内点}\end{split}\]
% \newline
% 设$E_1,E_2,\cdots,E_n$和$F$都是赋范空间,$B:E_1\times E_2\times\cdots\times E_n\to F$是多线性映射(即关于每个分量都是线性的).\\
% (a)证明下列命题等价:
% \begin{enumerate}[(1)]
% \item $B$在$E_1\times E_2\times\cdots\times E_n$上连续
% \item $B$在$E_1\times E_2\times\cdots\times E_n$的原点连续
% \item 存在常数$C\geq0$,使得$\forall(x_1,x_2,\cdots,x_n)\in E_1\times E_2\times\cdots\times E_n$,有
% \[\|B(x_1,x_2,\cdots,x_n)\|\leq C\|x_1\|\|x_2\|\cdots\|x_n\|.\]
% \end{enumerate}
% (b)若$E_1,\cdots,E_n$都是Banach空间,证明以上命题还等价于$B$关于每个分量连续\\
% \textit{Proof}:(a)\\
% (1)$\Rightarrow$(2)显然\\
% (2)$\Rightarrow$(3)因为$B$在原点连续,所以存在$r>0$,使得当$x\in B(0,r)$时,$\|B(x)\|\leq1$\\
% 任取$x=(x_1,x_2,\cdots,x_n)\in E_1\times E_2\times\cdots\times E_n$且$x\neq0$,有
% \[\left\|\left(\frac{x_1}{\|x_1\|},\frac{x_2}{\|x_2\|},\cdots,\frac{x_n}{\|x_n\|}\right)\right\|=1\Rightarrow r\left(\frac{x_1}{\|x_1\|},\frac{x_2}{\|x_2\|},\cdots,\frac{x_n}{\|x_n\|}\right)\in B(0,r)\]
% 故\[\left\|B\left(\frac{rx_1}{\|x_1\|},\frac{rx_2}{\|x_2\|},\cdots,\frac{rx_n}{\|x_n\|}\right)\right\|\leq1\]
% 由$B$的线性性得
% \[\|B(x_1,x_2,\cdots,x_n)\|\leq\frac{1}{r^n}\|x_1\|\|x_2\|\cdots\|x_n\|\]
% 令$C=\frac{1}{r^n}$即可\\
% (3)$\Rightarrow$(1)若$x^{(m)}\to x$,则$x^{(m)}_i\to x_i(1\leq i\leq n)$,故存在$M>0,s.t.\|x^{(m)}_i\|\leq M$,再利用添项及三角形不等式得
% \[\|B(x^{(m)})-B(x)\|\to0(m\to\infty)\]
% (b)利用Banach-Steinhaus定理\\



\begin{exercise}
    (a) 证明: $\FR\setminus\FQ$ 是 $\FR$ 上的 $\mathcal{G}_{\delta}$ 集.
    并导出 $\FQ$ 不是 $\mathcal{G}_{\delta}$ 集, 且不存在函数 $f:\FR\to\FR$ 使得 $\cont{f}=\FQ$.

    (b) 定义函数 $f:\FR\to\FR$: 当 $x\in\FR\setminus\FQ$ 时, 令 $f(x)=0$; $f(0)=1$;
    若 $x$ 是非零的有理数 $\frac{p}{q}$, 这里 $\frac{p}{q}$ 是 $x$ 的不可约形式, $p\in\FZ$,
    $q\in\FN$, 令 $f(x)=\frac{1}{q}$. 证明: $\cont{f}=\FR\setminus\FQ$.

    (c) 设 $f=\mathbbm{1}_{\FQ}$. 证明: $f$ 不是第一纲的 (即不是任一函数列的极限函数),
    但是存在一列第一纲的函数逐点收敛到 $f$.
\end{exercise}

\begin{proof}
    (a)记 $\FQ=\{r_k\}_{k=1}^{\infty}$, 对于每一个 $k$, 令
    \[U_k=\FR\setminus\{r_k\}=(-\infty,r_k)\cup(r_k,+\infty).\]
    显然 $U_k$ 是开集并且
    \[\bigcap_{k=1}^{\infty}U_k=\FR\setminus\FQ.\]
    因此 $\FR\setminus\FQ$ 是 $\FR$ 上的 $\mathcal{G}_{\delta}$集.
    假设 $\FQ$ 也是 $\mathcal{G}_{\delta}$ 集, 则存在一列开集 $\{V_k\}_{k=1}^{\infty}$,使得
    \[\FQ=\bigcap_{k=1}^{\infty}V_k.\]
    每个 $V_k$ 包含 $\FQ$, 故必在 $\FR$ 中稠密, 由 Baire 定理可知集合
    \[\biggl(\bigcap_{k=1}^{\infty}U_k\biggr)\bigcap\biggl(\bigcap_{k=1}^{\infty}V_k\biggr)\]
    在 $\FR$ 中稠密, 然而
    \[\biggl(\bigcap_{k=1}^{\infty}U_k\biggr)\bigcap\biggl(\bigcap_{k=1}^{\infty}V_k\biggr)=(\FR\setminus\FQ)\cap\FQ=\varnothing.\]
    矛盾, 从而假设不成立, 说明 $\FQ$ 不是 $\mathcal{G}_{\delta}$集,
    由于任一映射的连续点集都是 $\mathcal{G}_{\delta}$ 集,
    所以不存在函数 $f:\FR\to\FR$使得$\textrm{Cont}(f)=\FQ$.

    (b)容易验证该函数是周期为 $1$ 的函数, 因此只需要考虑该函数在区间 $[0,1]$ 上的情况:
   
    首先, $f$在无理数点处连续: 任意取定 $x_0\in\FR\setminus\FQ$,
    有 $f(x_0)=0$. 对于 $\forall\varepsilon>0$, 在 $[0,1]$ 上至多只有有限个 $\frac{p}{q}$
    使得 $f(\frac{p}{q})=\frac{1}{q}\geq\varepsilon$, 取 $\delta>0$, 
    使得 $U(x_0,\delta)$ 不包含上述有限个有理数(这样的 $\delta$ 显然是可以取到的), 则当 $x\in U(x_0,\delta)$ 时,
    \[|f(x)-f(x_0)|=|f(x)|<\varepsilon.\]

    其次, $f$ 在有理数点处不连续: 同理可证.

    因此 $\cont{f}=\FR\setminus\FQ$.

    (c)参见Elements of functional analysis by Francis P65.

    假设 $f=\mathbbm{1}_{\FQ}$ 是第一纲的, 则由定理6.1.7知 $\cont{f}$ 是
    $\FR$ 中稠密的 $\mathcal{G}_{\delta}$ 集, 但是 $f$ 在任意点处都不连续, 
    从而矛盾, 故 $f=\mathbbm{1}_{\FQ}$ 不是第一纲的. 取
    \[f_m(x)=\lim_{n\to+\infty}\cos(m!\pi x)^{2n}.\]
    由定义知 $(f_m)_{m\geq 1}$ 是一列第一纲的函数, 下面我们证明 $(f_m)_{m\geq 1}$ 逐点收敛到 $f$:
    \begin{itemize}
    \item 若$x\in\FQ$, 则可表示为 $x=\frac{p}{q}$, 当 $m\geq q$时,
          $m!\pi x=k\pi\Rightarrow f_m(x)=\lim_{n\to\infty}1=1=\mathbbm{1}_{\FQ}(x)$.
    \item 若 $x\in\FR\setminus\FQ$, 必有 $\cos(m!\pi x)\in(-1,1)\Rightarrow f_m(x)=0=\mathbbm{1}_{\FQ}(x)$.
    \end{itemize}
    综上知 $\lim_{m\to\infty}f_m=\mathbbm{1}_{\FQ}$.
\end{proof}



\begin{exercise}
    证明局部紧的 Hausdorff 空间是 Baire 空间.
\end{exercise}

\begin{proof}
设$X$是局部紧的Hausdorff空间,我们来证明$X$是Baire空间:

已有定理:局部紧的Hausdorff空间中每一点都有一个紧邻域基.

设$\{U_n\}_{n\geq 1}$是一列在$X$中稠密的开子集,且$D=\bigcap_{n\geq 1}U_n$,设$U$是任一非空开集,需证$D\cap U\neq\varnothing$\\
因为$U\cap U_1$是非空开集,所以存在非空开集$V_1$,使得$\bar{V}_1$紧且\[\bar{V}_1\subset U\cap U_1\]
因为$V_1\cap U_2$是非空开集,所以存在非空开集$V_2$,使得$\bar{V}_2$紧且\[\bar{V}_2\subset V_1\cap U_2\subset U\cap U_1\cap U_2\]
$\cdots$\\
因为$V_{n-1}\cap U_n$是非空开集,所以存在非空开集$V_n$,使得$\bar{V}_n$紧且\[\bar{V}_n\subset V_{n-1}\cap U_n\subset U\cap U_1\cap\cdots\cap U_n\]
依此可以得到一列开集$\{V_n\}$使得$\{\bar{V}_n\}$是单调递减的紧集列,故\[\bigcap_{n\geq 1}\bar{V}_n\neq\varnothing\]
所以\[D\cap U=\left(\bigcap_{n\geq 1}U_n\right)\cap U\neq\varnothing\]这就说明了$D$在$X$中稠密,因此$X$是Baire空间.
\end{proof}



\begin{exercise}
    (a) 设 $f:\FR\to\FR$ 是可微函数. 证明: $\cont{f'}$ 是 $\FR$ 上稠密的 $\mathcal{G}_{\delta}$ 集.

    (b) 设 $f:\FR^2\to\FR$ 连续且在 $\FR^2$ 上存在偏导数 $\frac{\partial f}{\partial x}$ 和 $\frac{\partial f}{\partial y}$.
    证明: $f$ 的可微点包含 $\FR^2$ 中一个稠密的 $\mathcal{G}_{\delta}$ 集.
\end{exercise}

\begin{proof}
    (a)记
    \[g_n(x)=n\left[f\left(x+\frac{1}{n}\right)-f(x)\right].\]
    则 $(g_n)_{n\geq 1}$ 是 $\FR$ 上的连续函数序列且对于任意 $x\in\FR$, 有
    \[\lim_{n\to\infty}g_n(x)=f'(x).\]
    由定理 6.1.7 知 $\cont{f'}$ 是 $\FR$ 中稠密的 $\mathcal{G}_{\delta}$ 集.

    (b) 因为 
    \[\frac{\partial f(x,y)}{\partial x}=\lim\limits_{n\to\infty}n\left[f\left(x+\frac{1}{n},y\right)-f(x,y)\right]\overset{\Delta}{=}\lim\limits_{n\to\infty}F_n(x,y).\]
    且 $F_n(x,y)\in C(\FR^2)$, 所以 $\frac{\partial f(x,y)}{\partial x}$ 
    的连续点集是稠密的 $\mathcal{G}_{\delta}$集, 记为 $G_x$;
    同理 $\frac{\partial f(x,y)}{\partial y}$ 的连续点集也是稠密的 $\mathcal{G}_{\delta}$集,
    记为 $G_y$. 令 $G=G_x\cap G_y$, 则 $G$ 也是稠密的 $\mathcal{G}_{\delta}$ 集, 并且 $f$ 在 $G$ 上可微.
\end{proof}



\begin{exercise}
    证明: 完备度量空间中的任何一个可数子集至少含有一个孤立点.
\end{exercise}




\setcounter{exer}{5}
\begin{exercise}
    设 $E$ 和 $F$ 都是 Banach 空间, $(u_n)$ 是 $\mathcal{B}(E,F)$ 的序列.
    证明下列命题等价:

    (a) $(u_n(x))$ 在每个 $x\in E$ 处收敛.

    (b) $A\subset E$ 且 $\Span(A)$ 在 $E$ 中稠密, $(u_n(a))$ 在每个 $a\in A$ 处收敛,
    且 $(u_n)$ 有界.
\end{exercise}

\begin{proof}
    $(a)\Rightarrow(b)$ 是显然的, 下证 $(b)\Rightarrow(a)$,
    即证 $\forall x\in E\setminus A$, $(u_n(x))$ 收敛:
    因为 $(u_n(a))$在每个$a\in A$处收敛, 所以$(u_n(a))$在每个$a\in\Span(A)$ 处收敛,
    因为 $\Span(A)$ 在 $E$ 中稠密, 所以存在 $(x_m)_{m\geq1}\subset\Span(A)$,
    使得 $x_m\to x(m\to\infty)$, 显然 $(x_m)_{m\geq1}$ 是 $E$ 中的 Cauchy 序列. 
    \[\begin{split}
    \lim_{n\to\infty}u_n(x)
    &=\lim_{n\to\infty}u_n\left(\lim_{m\to\infty}x_m\right)\\
    &=\lim_{n\to\infty}\lim_{m\to\infty}u_n(x_m)\\
    &=\lim_{m\to\infty}\lim_{n\to\infty}u_n(x_m)\\
    &=\lim_{m\to\infty}y_m\end{split}\]
    下面我们只需要证明$\lim_{m\to\infty}y_m$存在,结合$F$是Banach空间可知只需要证明$(y_m)$是$F$中Cauchy序列即可,而这个结论通过下式即得:
    \[\begin{split}
    \|y_m-y_k\|
    &=|\lim_{n\to\infty}u_n(x_m)-\lim_{n\to\infty}u_n(x_k)|\\
    &=|\lim_{n\to\infty}u_n(x_m-x_k)|\\
    &\leq\mathop{\textrm{lim inf}}\limits_{n\to\infty}\|u_n\|\cdot\|x_m-x_k\|\left(\mbox{注意}(x_m)_{m\geq1}\mbox{是}\mathrm{Cauchy}\mbox{序列}\right)
    \end{split}\]
\end{proof}



% 7.\textit{Proof}:因为$f$是Lipschitx函数,所以存在正常数$C$使得对任意$x,y\in [0,1]$,有$|f(x)-f(y)|\leq C|x-y|$,则
% \[\begin{split}
% \left|\frac{u_n(f)}{n}\right|&=\left|\int_0^1f(t)dt-\frac{1}{n}\sum_{k=1}^nf\left(\frac{k}{n}\right)\right|\\
% &=\left|\sum_{k=1}^n\int_{\frac{k-1}{n}}^{\frac{k}{n}}f(t)dt-\frac{1}{n}\sum_{k=1}^nf\left(\frac{k}{n}\right)\right|\\
% &\leq\frac{1}{n}\sum_{k=1}^n\left|f(\xi_k)-f\left(\frac{k}{n}\right)\right|\left(\xi_k\in\left(\frac{k-1}{n},\frac{k}{n}\right)\right)\\
% &\leq\frac{1}{n}\sum_{k=1}^nC\left|\xi_k-\frac{k}{n}\right|\\
% &\leq\frac{1}{n}\sum_{k=1}^nC\cdot\frac{1}{n}=\frac{C}{n}
% \end{split}\]
% 因此\[\frac{u_n(f)}{n}=O\left(\frac{1}{n}\right)(n\to\infty)\]
% (b)我们有\[\begin{split}
% \|u_n(f)\|&=\left|n\int_0^1f(t)\diff t-\sum_{k=1}^nf\left(\frac{k}{n}\right)\right|\\
% &\leq n\int_0^1|f(t)|\diff t+\sum_{k=1}^n\left|f\left(\frac{k}{n}\right)\right|\\
% &\leq n\|f\|_{\infty}+n\|f\|_{\infty}\\
% &=2n\|f\|_{\infty}
% \end{split}\]
% 构造类似于锯齿状函数:\[f_{m,n}(x)=\begin{cases}-mx+\frac{km}{n}-1\left(\frac{k}{n}-\frac{2}{m}\leq x\leq\frac{k}{n}\right)(k=1,2,\cdots,n)\\ mx-\frac{km}{n}-1\left(\frac{k}{n}\leq x\leq\frac{k}{n}+\frac{2}{m}\right)(k=1,2,\cdots,n-1)\\1,\mbox{其它点处}\end{cases}\]
% 显然$f_{m,n}\in E$,且$||f_{m,n}||_{\infty}=1$,在点$x=\frac{k}{n}(k=1,2,\cdots,n)$处,$f_{m,n}(x)=-1$\\
% 因此对每个固定的$n$,有
% \[|u_n(f_{m,n})|=\left|n\int_0^1f_{m,n}(t)dt-\sum_{k=1}^nf_{m,n}\left(\frac{k}{n}\right)\right|=\left|2n-\frac{2n(2n-1)}{m}\right|\to 2n(m\to\infty)\]所以$\|u_n\|=2n$\\
% (c)因为$E$是Banach空间且$\sup_{n\geq 1}\|u_n\|=\infty$,所以由定理6.2.4知
% \[G=\left\{f\in E:\sup_{n\geq 1}|u_n(f)|=+\infty\right\}\mbox{是}C([0,1])\mbox{中稠密的}\mathcal{G}_{\delta}\mbox{集}\]换个说法也即
% \[G=\left\{f\in E:\frac{u_n(f)}{n}\neq O\left(\frac{1}{n}\right)\right\}\mbox{是}C([0,1])\mbox{中稠密的}\mathcal{G}_{\delta}\mbox{集}\]


\setcounter{exer}{7}
\begin{exercise}
    设 $E$ 是 $(C([0,1]),\|\cdot\|_{\infty})$ 的闭向量子空间, 并假设 $E$ 中的元素都是 Lipschitz 函数.

    (a) 设 $x,y\in [0,1]$ 且 $x\neq y$, 定义泛函 $\varPhi_{x,y}:E\to\FR$ 为
    \[\varPhi_{x,y}(f)=\frac{f(y)-f(x)}{y-x}.\]
    证明: $\{\varPhi_{x,y}\mid x,y\in [0,1],x\neq y\}$ 是 $E^*$ 中的有界集.

    (b) 导出 $E$ 中闭单位球在 $[0,1]$ 上等度连续, 且 $\dim E<\infty$.
\end{exercise}

\begin{proof}
    (a) 因为完备度量空间的闭子空间完备, 所以 $E$ 是 Banach 空间,
    容易验证 $\{\varPhi_{x,y}\}\subset E^*$, 又因为对任意 $f\in E$, 有
    \[\sup_{x,y\in[0,1],x\neq y}|\varPhi_{x,y}(f)|=\sup_{x,y\in[0,1],x\neq y}\left|\frac{f(y)-f(x)}{y-x}\right|\leq C.\]
    这里的 $C$ 是函数 $f$ 的 Lipschitz 常数, 故由 Banach-Steinhaus 定理知
    \[\sup_{x,y\in[0,1],x\neq y}\|\varPhi_{x,y}\|<\infty.\]
    也即 $\{\varPhi_{x,y}\mid x,y\in[0,1],x\neq y\}$ 是 $E^*$ 中的有界集.

    (b) 记 $E$ 中的闭单位球为 $\closure{B_E}$, 则由 (a) 中结论知
    \[\sup_{x,y\in[0,1],x\neq y}\sup_{f\in \closure{B_E}}\|\varPhi_{x,y}(f)\|<\infty.\]
    即
    \[\sup_{x,y\in[0,1],x\neq y}\sup_{f\in \closure{B_E}}\left|\frac{f(y)-f(x)}{y-x}\right|<\infty.\]
    这说明 $\closure{B_E}$ 在 $[0,1]$ 上一致等度连续, 故必然等度连续.
    又对任意 $x\in[0,1]$, $\closure{B_E}$ 的轨道
    \[\closure{B_E}(x)=\{f(x):f\in \closure{B_E}\}=\{f(x):\max_{0\leq x\leq 1}|f(x)|=1\}\]
    有界, 故由 Ascoli 定理知 $\closure{B_E}$ 在 $E$ 中相对紧, 从而紧, 根据 Riesz 引理知 $\textrm{dim}E<\infty$.
\end{proof}



\setcounter{exer}{9}
\begin{exercise}
    设 $E,F$ 都是 Banach 空间, $u\in\mathcal{B}(E,F)$ 并满足 $u(B_E)$ 在 $B_F$ 中稠密.

    (a) 计算 $\|u\|$.

    (b) 证明: $u(B_E)=B_F$. 因此 $u$ 是满射.

    (c) 设 $v\in B(E/\ker u,F)$ 并满足 $v\circ q=u$, 这里 $q:E\to E/\ker u$
    是商映射. 证明: $v$ 是从 $E/\ker u$ 到 $F$ 上的等距映射.
\end{exercise}

\begin{proof}
    (a) 因为 $u(B_E)$ 在 $B_F$ 中稠密,
    所以 $B_F\subset\overline{u(B_E)}=\overline{B_F}$,
    又由 $u$ 连续知 $u(\overline{B_E})\subset\overline{u(B_E)}$, 故
    \[\|u\|=\sup_{x\in\overline{B_E}}\|u(x)\|=\sup_{u(x)\in u(\overline{B_E})}\|u(x)\|\leq\sup_{u(x)\in \overline{u(B_E)}}\|u(x)\|=\sup_{u(x)\in\overline{B_F}}\|u(x)\|=1.\]
    对任意 $\varepsilon>0$, 存在 $y\in B_F$,
    使得 $\|y\|\geq 1-\varepsilon$, 对于上述 $y\in B_F$, 存在 $x\in B_E$,
    使得 $\|u(x)-y\|\leq\varepsilon$, 故
    \[\|u(x)\|\geq\|y\|-\|u(x)-y\|\geq 1-2\varepsilon.\]
    由 $\varepsilon$ 的任意性知 $\|u\|=1$.

    (b) 由条件知, $u(B_{E})\subset B_{F}$ 且 $B_{F}\subset\closure{u\left(B_{E}\right)}$. 
    我们采用和教材中开映射定理 6.3.1 类似的证明过程, 首先任取常数 $0<\delta<1$, 对任意 $y\in B_{F}$, 取 $x_0\in B_{E}$, 使得
    \[
    \|y-u(x_0)\|<\delta.
    \] 
    并设 $y_{1}=\frac{1}{\delta}(y-u(x_{0}))$, 则 $y_1\in B_F$. 再取 $x_1\in B_E$, 使得
    \[
    \|y_{1}-u(x_{1})\|<\delta .
    \]
    再设 $y_2=\frac{1}{\delta}(y_1-u(x_1))$, 则 $y_2\in B_F$. 依次下来, 
    可得一列 $(y_n)_{n\geq 1}\subset B_F$ 及相应序列 $(x_n)_{n\geq 1}\subset B_E$, 满足
    \[
    y_{n+1}=\frac{1}{\delta}(y_n-u(x_n)),\|y_{n}-u(x_{n})\|<\delta, \quad n\geq 1.
    \]
    由以上构造过程, 可得
    \begin{equation}
        \begin{aligned}
            y &=\delta y_{1}+u(x_{0})=\delta^{2} y_{2}+u(x_{0})+\delta u(x_{1})=\cdots \cdots \\
            &=\delta^{n+1} y_{n+1}+u(x_{0})+\delta u(x_{1})+\delta^{2} u(x_{2})+\cdots+\delta^{n} u(x_{n}) \\
            &=\delta^{n+1} y_{n+1}+u\biggl(\sum_{k=0}^{n} \delta^{k} x_{k}\biggr).
        \end{aligned}\tag{$\star$}
    \end{equation}
    在上式中, $\sum_{k=0}^n \delta^k x_k$ 在 $n\to\infty$ 时收敛于某一点 $x\in E$, 且
    \[\|x\|\leq\sum_{n=1}^{\infty}\delta^n\|x_n\|<\frac{1}{1-\delta}.\]
    在 $(\star)$ 式中取 $n\to\infty$, 得 $y=u(x)$, 故 $B_F\subset u(\frac{1}{1-\delta}B_E)$.
    由 $u$ 的线性性, 有 $(1-\delta)B_F\subset u(B_E)$.
    任取 $y\in B_F$, 总可取到 $0<\delta<1$ 使得 $1-\delta>\|y\|$, 故
    $y\in u(B_E)$, 从而 $B_F\subset u(B_E)$. 这样就证明了 $u(B_E)=B_F$.

    (c) 对任意 $x\in E$, 用 $[x]$ 表示以 $x$ 为代表元的等价类. 由定义可知, 若 $[x]=[y]$, 则
    $u(x-y)=0$. 而且, 由于 $u$ 是连续的, 则 $\ker u$ 是 $E$ 的闭向量子空间, $E/\ker u$ 自然
    成为一个赋范空间, 其上的范数 $\|\cdot\|$ 约定为
    \[\|[x]\|=\inf_{y\in\ker u}\|x+y\|=\inf_{y\in[x]}\|y\|.\]
    由于 $v\in\mathcal{B}(E/\ker u, F)$ 满足 $v\circ q=u$, 则 $v([x])=u(x)$, $\forall x\in E$. 
    因 $u$ 是满射, 故 $v$ 也是满射; 而 $[x]\neq[y]$ 等价于 $u(x)\neq u(y)$, 故 $v$ 也是单射. 实际上, 由开
    映射定理立即得到, $v$ 是 $E/\ker u$ 到 $F$ 的线性同构映射.

    任取 $[x]\in E/\ker u$, 设 $y=v([x])$, 则也有 $y=u(x)$. 那么由 $u(B_{E})=B_{F}$, 可
    知对任意 $0<\varepsilon<1$, 存在 $x_{0}\in B_{E}$, 使得 
    $u(x_0)=\varepsilon \frac{y}{\|y\|}$, 则又有 $y=u(\varepsilon^{-1}\|y\| x_{0})$.
    于是得 $u(x-\varepsilon^{-1}\|y\| x_{0})=0$, 这表明 $\varepsilon^{-1}\|y\| x_{0}\in [x]$. 因此
    \[
    \|[x]\| \leq\bigl\|\varepsilon^{-1}\|y\|x_{0}\bigr\|\leq\varepsilon^{-1}\|y\|=\varepsilon^{-1}\|v([x])\| .
    \]
    由 $\varepsilon$ 的任意性, 即得 $\|[x]\|\leq\|v([x])\|$.

    另一方面, 对任意 $[x]\in E/\ker u$, 任取 $[x]$ 的代表元 $y$, 都有
    \[
    \|v([x])\|=\|u(y)\| \leq\|u\|\cdot\|y\|=\|y\|.
    \]
    对上式右边所有代表元的范数取下确界, 即得
    \[\|v([x])\|\leq\inf_{y\in [x]}\|y\|=\|[x]\|.\]
    综合以上讨论, 我们证明了 $v$ 是从 $E/\ker u$ 到 $F$ 上的等距同构映射.

    \textbf{另一种更直接的证明}:
    任取 $x\in B_E$, 则有 $\|[x]\|\leq\|x\|<1$, 即
    \[q(B_E)\subset B_{E/\ker u}.\]
    反过来, 任取 $[x]\in B_{E/\ker u}$, 则必定存在代表元 $y\in[x]$, 
    使得 $\|[x]\|\leq\|y\|<1$. 于是得 $y\in B_{E}$, 满足 $[x]=q(y)\in q(B_{E})$, 也就有
    \[
    B_{E/\ker u}\subset q(B_{E}).
    \]
    因此, 我们得到 $B_{E/\ker u}=q(B_{E})$. 再由 $u(B_{E})=B_{F}$, 以及 $u=v \circ q$, 立即得到
    \[
    v(B_{E/\ker u})=B_{F}.
    \]
    而且, 因 $v\in E/\ker u\to F$ 是同构映射, 故也有
    \[
    v^{-1}(B_{F})=B_{E/\ker u}.
    \]
    由以上两式立即得到 $\|v\|=\|v^{-1}\|=1$. 故 $v$ 是从 $E/\ker u$ 到 $F$ 上的等距同构映射.
\end{proof}
% 11.\textit{Proof}:(a)
% \[\|q(g)-f\|_{\infty}=\sup_{y\in Y}|q(g)(y)-f(y)|=\sup_{y\in Y}\left|\frac{d(y,B)-d(y,A)}{3[d(y,B)+d(y,A)]}-f(y)\right|\]
% 下面分三种情况讨论:
% \begin{enumerate}[(i)]
% \item $y\in A$时,\[\|q(g)-f\|_{\infty}=\sup_{y\in A}\left|\frac{d(y,B)}{3d(y,B)}-f(y)\right|=\sup_{y\in A}\left|\frac{1}{3}-f(y)\right|\leq\frac{2}{3}\]
% \item $y\in B$时,\[\|q(g)-f\|_{\infty}=\sup_{y\in B}\left|\frac{-d(y,A)}{3d(y,A)}-f(y)\right|=\sup_{y\in B}\left|-\frac{1}{3}-f(y)\right|\leq\frac{2}{3}\]
% \item $y\in Y\backslash(A\cup B)$时,因为
% \[-\frac{1}{3}<f(y)<\frac{1}{3}\mbox{且}-\frac{1}{3}<\frac{d(y,B)-d(y,A)}{3[d(y,B)+d(y,A)]}<\frac{1}{3}\]
% 所以\[\|q(g)-f\|_{\infty}<\frac{2}{3}\]
% \end{enumerate}
% 注意到上面的讨论蕴含$A$和$B$为空集的情形,所以得证$\|q(g)-f\|_{\infty}\leq\frac{2}{3}$\\
% (b)对于任意$f\in F$,令
% \[C=\left\{y\in Y:f(y)\geq\frac{1}{3}\|f\|_{\infty}\right\},D=\left\{y\in Y:f(y)\leq-\frac{1}{3}\|f\|_{\infty}\right\}\]
% 定义函数\[g(x)=\frac{d(x,D)-d(x,C)}{3[d(x,D)+d(x,C)]}\cdot\|f\|_{\infty}\]
% 则显然成立$\|g\|_{\infty}\leq\frac{1}{3}\|f\|_{\infty}$,且同$(a)$的证明过程可知
% $\|q(g)-f\|_{\infty}\leq\frac{2}{3}\|f\|_{\infty}$\\
% (c)对于满足(b)中两式的$f\in F$和$g\in E$,有
% \[\frac{2}{3}\|f\|_{\infty}\leq\|f\|_{\infty}-\|g\|_{\infty}\leq\|f\|_{\infty}-\|q(g)\|_{\infty}\leq\|f-q(g)\|_{\infty}\leq\frac{2}{3}\|f\|_{\infty}\]
% 故\[\|g\|_{\infty}=\frac{1}{3}\|f\|_{\infty}\mbox{且}\|f-q(g)\|_{\infty}=\frac{2}{3}\|f\|_{\infty}\]
% 然后进行如下程序:对于任意$f\in F$\\
% 存在$g_1\in E$,使得\[\begin{split}&\|g_1\|_{\infty}=\frac{1}{3}\|f\|_{\infty}\\&\|f-q(g_1)\|_{\infty}=\frac{2}{3}\|f\|_{\infty}\end{split}\]
% 存在$g_2\in E$,使得\[\begin{split}&\|g_2\|_{\infty}=\frac{1}{3}\|f-q(g_1)\|_{\infty}=\frac{1}{3}\cdot\frac{2}{3}\|f\|_{\infty}\\&\|f-q(g_1)-q(g_2)\|_{\infty}=\frac{2}{3}\|f-q(g_1)\|_{\infty}=\left(\frac{2}{3}\right)^2\|f\|_{\infty}\end{split}\]
% $\cdots\cdots$\\
% 存在$g_n\in E$,使得\[\begin{split}&\|g_n\|_{\infty}=\frac{1}{3}\left\|f-\sum_{k=1}^{n-1}q(g_k)\right\|_{\infty}=\frac{1}{3}\left(\frac{2}{3}\right)^{n-1}\|f\|_{\infty}\\&\left\|f-\sum_{k=1}^nq(g_k)\right\|_{\infty}=\frac{2}{3}\left\|f-\sum_{k=1}^{n-1}q(g_k)\right\|_{\infty}=\left(\frac{2}{3}\right)^n\|f\|_{\infty}\end{split}\]
% 这样就得到一列$(g_n)_{n\geq 1}\subset E$满足下面两个性质:\\
% \[(i)\|g_n\|_{\infty}=\frac{1}{3}\left(\frac{2}{3}\right)^{n-1}\|f\|_{\infty}\mbox{和}(ii)\left\|f-\sum_{k=1}^nq(g_k)\right\|_{\infty}=\left(\frac{2}{3}\right)^n\|f\|_{\infty}\]
% 由性质$(i)$:因为$\sum_{n=1}^{\infty}\|g_n\|_{\infty}$收敛且$E$是Banach空间,所以$\sum_{n=1}^{\infty}g_n\to g\in E$\\
% 由性质$(ii)$:知$\sum_{n=1}^{\infty}q(g_n)$一致收敛到$f$\\
% 因为$q$是Lipschitx映射,所以$q$连续,故\[\sum_{n=1}^{\infty}q(g_n)=q\left(\sum_{n=1}^{\infty}g_n\right)\to q(g)\]由极限的唯一性知$f=q(g)$\\
% 因为\[\|g\|_{\infty}=\left\|\sum_{n=1}^{\infty}g_n\right\|\leq\sum_{n=1}^{\infty}\|g_n\|_{\infty}=\sum_{n=1}^{\infty}\frac{1}{3}\left(\frac{2}{3}\right)^{n-1}\|f\|_{\infty}=\|f\|_{\infty}\]
% 并且$\|f\|_{\infty}=\|q(g)\|_{\infty}\leq\|g\|_{\infty}$,所以$\|g\|_{\infty}=\|f\|_{\infty}$\\
% (d)由(c)中结论知此问显然成立\\
% (e)任取$f\in C(Y,\FR)$:
% \begin{itemixe}
% \item 若$f$有界,则由(c)知存在$g\in C(X,\FR)$使得$q(g)=f$
% \item 若$f$无界,令$f_1=\arctan f$,则$f_1\in F$,故存在$g_1\in E$使得$q(g_1)=f_1$,令$g=\tan g_1$,则
% \[q(g)=q(\tan g_1)=\tan(q(g_1))=\tan(f_1)=f\]\end{itemixe}
% 13.\textit{Proof}:(a)假设$F$在$E$中的内部不是空集,则存在$x\in F,r>0$使得$B(x,r)\subset F$,这里的$B(x,r)$是$E$中的开球,由$F$是向量子空间可得$B(0,r)\subset F\Rightarrow B(0,n)\subset F(\forall n)$,从而
% \[E=\bigcup_{n\geq 1}B(0,n)\subset F\Rightarrow E=F\]
% 矛盾,故假设不成立,即证$F$在$E$中的内部为空集\\
% (b)记所有多项式构成的空间为$\mathcal{P}$,所有次数不超过$n$的多项式构成的空间为$\mathcal{P}_n$,则
% \[\mathcal{P}=\bigcup_{n\geq 1}\mathcal{P}_n\]
% 假设$\mathcal{P}$上有完备范数,由(a)知$\mathcal{P}_n^{\circ}=\emptyset$,由Baire定理知$\mathcal{P}^{\circ}=\emptyset$,矛盾,故假设不成立,所以$\mathcal{P}$不能赋予完备范数\\\\


\setcounter{exer}{13}
\begin{exercise}
    设 $E$ 是 Banach 空间, $F$ 和 $G$ 都是 $E$ 的闭向量子空间, 并且 $F+G$
    也是闭向量子空间. 证明: 存在一个常数 $C\geq 0$, 使得 $\forall x\in F+G$,
    存在 $(f,g)\in F\times G$, 满足
    \[x=f+g,\;\|f\|\leq C\|x\|,\;\|g\|\leq C\|x\|.\]
\end{exercise}

\begin{proof}
    考虑乘积 Banach 空间 $F\times G$ (赋予范数 $\|(f,g)\|=\|f\|+\|g\|$)
    和 Banach 空间 $F+G$ (范数即为 $E$ 中范数). 映射
    \[u:F\times G\to F+G,\;(f,g)\mapsto f+g\]
    为连续线性的满射, 由开映射定理, $u(B_{F\times G}(0,1))$ 为 $F+G$ 中含原点的开集,
    取常数 $c>0$, 使得 $B_{F+G}(0,c)\subset u(B_{F\times G}(0,1))$.
    则对于任意 $x\in F+G$ 且 $\|x\|<c$, 存在 $f\in F$, $g\in G$
    且 $\|f\|+\|g\|<1$, 使得 $x=f+g$.

    对于一般的 $x\in F+G$, 任取 $0<c'<c$, 由于 $x=\frac{\|x\|}{c'}\bigl(\frac{c'}{\|x\|}x\bigr)$,
    其中 $\left\|\frac{c'}{\|x\|}x\right\|=c'<c$, 故存在 $f'\in F$, $g'\in G$,
    使得 $\frac{c'}{\|x\|}x=f'+g'$ 且 $\|f'\|+\|g'\|<1$.
    令 $f=\frac{\|x\|}{c'}f'$, $g=\frac{\|x\|}{c'}g'$, 则
    $x=f+g$ 且
    \[\|f\|+\|g\|=\frac{\|x\|}{c'}\bigl(\|f'\|+\|g'\|\bigr)<\frac{1}{c'}\|x\|.\]
    由 $c'$ 的任意性即得 $\|f\|+\|g\|\leq\frac{1}{c}\|x\|$.
    再令 $C=\frac{1}{c}$ 即证所需.
\end{proof}



\begin{exercise}
    设 $H$ 是 Hilbert 空间, 且线性映射 $u:H\to H$ 满足
    \[\innerp{u(x)}{y}=\innerp{x}{u(y)},\quad\forall x,y\in H.\]
    证明: $u$ 连续.
\end{exercise}

\begin{proof}
    考虑线性泛函
    \[f_x:H\to\mathbb{K},y\mapsto\langle u(y),u(x)\rangle.\]
    记 $H$ 中的闭单位球为 $\closure{B_H}$, 对于任意 $y\in H$,由 Cauchy-Schwarz 不等式有
    \[\sup_{x\in\closure{B_H}}|f_x(y)|=\sup_{x\in\closure{B_H}}|\innerp{u(y)}{u(x)}|=\sup_{x\in \closure{B_H}}|\innerp{u(u(y))}{x}|\leq\|u(u(y))\|<\infty.\]
    故由 Banach-Steinhaus 定理知
    \[\sup_{x\in \closure{B_H}}\|f_x\|<\infty.\]
    即
    \[\sup_{x\in \closure{B_H}}\sup_{y\in \closure{B_H}}|\langle u(y),u(x )\rangle|<\infty.\]
    因此
    \[\|u\|^2=\sup_{x\in\closure{B_H}}\|u(x)\|^2=\sup_{x\in \closure{B_H}}\langle u(x),u(x)\rangle<\infty.\]
    从而 $u$ 为有界算子, 亦即为连续算子.
\end{proof}
% 18.\textit{Proof}:(a)显然$u$是线性的,且当$\|(a_n)_{n\geq 1}\|\leq 1$时,有$\|u((a_n)_{n\geq 1})\|=\|\sum_{n\geq 1}a_nx_n\|\leq\sum_{n\geq 1}|a_n|\cdot\|x_n\|\leq\sum_{n\geq 1}|a_n|\leq 1$
% 因此$\|u\|\leq 1$,从而$u\in\mathcal{B}(\ell_1,E)$\\
% (b)由(a)知$u(B_{\ell_1})\subset \closure{B_E}$\\
% 任取$y\in \closure{B_E}$,则$d(y,\frac{1}{2}\closure{B_E})<\frac{1}{2}$,故存在$n_1\geq 2$使得$\|y-\frac{1}{2}x_{n_1}\|<\frac{1}{2}$\\
% 令$y_1=y-\frac{1}{2}x_{n_1}$,则存在$n_2>n_1$使得$\|2y_1-\frac{1}{2}x_{n_2}\|<\frac{1}{2}$\\
% 令$y_2=y_1-\frac{1}{4}x_{n_2}$,则存在$n_3>n_2$使得$\|4y_2-\frac{1}{2}x_{n_3}\|<\frac{1}{2}$\\
% $\cdots\cdots$\\
% 这样就得到一列$(x_{n_k})_{k\geq 1}$及$(y_k)_{k\geq 1}$使得
% \[y=\sum_{k=1}^n\frac{1}{2^k}x_{n_k}+y_k\]
% 因为$\|2^ky_k-\frac{1}{2}x_{n_{k+1}}\|<\frac{1}{2}\Rightarrow\|y_k-\frac{1}{2^{k+1}}x_{n_{k+1}}\|<\frac{1}{2^{k+1}}$,所以$y_k\to0(k\to\infty)$,故\[y=\sum_{k=1}^{\infty}\frac{1}{2^k}x_{n_k}\]
% 记$a_{n_k}=\frac{1}{2^k}$,对于其他$j\in\mathbb{N}^{*}\backslash\{n_k\}_{k=1}^{\infty}$,令$a_j=0$
% ,则$(a_n)_{n\geq 1}\in\ell_1$,并且$y=\sum_{n\geq 1}a_nx_n$,从而$u(B_{\ell_1})=\closure{B_E}$\\\\
% 下面证明$u(\overline{B_{\ell_1}})=\closure{B_E}$:\\
% 因为$u(B_{\ell_1})=\closure{B_E}$,所以$u(\overline{B_{\ell_1}})\supset \closure{B_E}$,故只需要说明$u(\overline{B_{\ell_1}})\subset \closure{B_E}$,任取$(a_n)_{n\geq 1}\in\overline{B_{\ell_1}}$,有:$\|u((a_n)_{n\geq 1})\|=\|\sum_{n\geq 1}a_nx_n\|\leq\sum_{n\geq 1}|a_n|\cdot\|x_n\|<\sum_{n\geq 1}|a_n|\leq 1$,故$u(\overline{B_{\ell_1}})\subset \closure{B_E}$\\
% (c)\begin{enumerate}[(i)]
% \item 由(a)(b)中结论及$\ell_p$可分知存在$u\in\mathcal{B}(\ell_1,\ell_p),s.t.u(B_{\ell_1})=B_{\ell_p}$,显然$u$是满射
% \item 假设存在连续线性映射$v:\ell_p\to\ell_1,s.t.u\circ v=id$,因为$v$是单射,所以$\ell_p$与$v(\ell_p)$同构,又因为$\ell_1$与$v(\ell_p)$同构,故$\ell_1$于$\ell_p$同构,矛盾
% \end{enumerate}